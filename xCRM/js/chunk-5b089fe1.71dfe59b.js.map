{"version":3,"sources":["webpack:///./src/views/Planning.vue?50c3","webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./src/views/Planning.vue?73cb","webpack:///src/views/Planning.vue","webpack:///./src/views/Planning.vue?f4f6","webpack:///./src/views/Planning.vue","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["$","$reduce","left","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","1","target","proto","forced","reduce","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_f","info","bill","categories","_l","c","key","id","title","spend","limit","directives","name","rawName","value","expression","attrs","class","progressColor","style","width","progress","staticRenderFns","component","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","TypeError","module","exports","right"],"mappings":"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","file":"js/chunk-5b089fe1.71dfe59b.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=style&index=0&id=4885cf0e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=style&index=0&id=4885cf0e&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"page-title\"},[_c('h3',[_vm._v(_vm._s(_vm._f(\"localize\")('planningTitle'))+\" \"),_c('small',[_vm._v(\"(\"+_vm._s(_vm._f(\"localize\")('consumptionCategory'))+\")\")])]),_c('h4',{staticClass:\"currency-header\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.info.bill,'RUB')))])]),(_vm.loading)?_c('loader'):(!_vm.categories.length)?_c('p',{staticClass:\"center\"},[_vm._v(_vm._s(_vm._f(\"localize\")('noCategories'))+\". \"),_c('router-link',{attrs:{\"to\":\"/categories\"}},[_vm._v(_vm._s(_vm._f(\"localize\")('addCategory')))])],1):_c('section',_vm._l((_vm.Categories),function(c){return _c('div',{key:c.id},[_c('p',[_c('strong',[_vm._v(_vm._s(c.title))]),_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(c.spend))+\" \"+_vm._s(_vm._f(\"localize\")('of'))+\" \"+_vm._s(_vm._f(\"currency\")(c.limit))+\" \")]),_c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(c.tooltip),expression:\"c.tooltip\"}],staticClass:\"progress\",attrs:{\"data-position\":\"top\"}},[_c('div',{staticClass:\"determinate \",class:[c.progressColor],style:({width: c.progress + '%' })})])])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n    <div>\n        <div class=\"page-title\">\n            <h3>{{'planningTitle' | localize}} <small>({{'consumptionCategory' | localize}})</small></h3>\n            <h4 class=\"currency-header\">{{info.bill | currency('RUB')}}</h4>\n        </div>\n\n        <loader v-if=\"loading\" />\n        <p class=\"center\" v-else-if=\"!categories.length\">{{'noCategories' | localize}}. <router-link to=\"/categories\">{{'addCategory' | localize}}</router-link> </p>\n        <section v-else>\n            <div v-for=\"c of Categories\" :key=\"c.id\">\n                <p>\n                    <strong>{{c.title}}</strong>\n                    {{c.spend | currency}} {{'of' | localize}} {{c.limit | currency}}\n                </p>\n                <div class=\"progress\" v-tooltip=\"c.tooltip\" data-position=\"top\">\n                    <div\n                            class=\"determinate \"\n                            :class=\"[c.progressColor]\"\n                            :style=\"{width: c.progress + '%' }\"\n                    ></div>\n                </div>\n            </div>\n        </section>\n    </div>\n\n</template>\n\n<script>\n    import {mapGetters} from 'vuex'\n    import currencyFilter from '@/filters/currency.filter'\n    export default {\n        name: \"planning\",\n        metaInfo() { // vue-meta plugin\n            return {\n                title: this.$title('planningTitle'),\n                htmlAttrs: {\n                    lang: this.$lang('lang')\n                }\n            }\n        },\n        data: () => ({\n            loading: true,\n            Categories: [],\n            Locale: ''\n        }),\n        async mounted() {\n            let records = [], categories = [];\n            if( this.records.length ) {\n                records = this.records;\n            } else {\n                records = await this.$store.dispatch('fetchRecords');\n            }\n\n            if( this.categories.length ) {\n                categories = this.categories;\n            } else {\n                categories = await this.$store.dispatch('fetchCategories');\n            }\n\n           // const categories = await this.$store.dispatch('fetchCategories');\n\n            this.Locale = this.info.locale;\n\n            this.Categories  = categories.map( c => {\n                 const spend = records\n                     .filter(r => r.categoryID === c.id)\n                     .filter(r => r.type === 'outcome')\n                     .reduce((b,r) => {\n                         return b += +r.amount;\n                     },0);\n\n                 const percent  = 100 * spend / c.limit;\n                 const progress = percent > 100 ? 100 : percent;\n                 const progressColor = percent < 80 ? 'green' : percent <= 100 ? 'yellow' : 'red';\n\n                 const tooltipDiff = c.limit - spend;\n\n                  let tooltip = '';\n\n                  if( this.Locale === 'ru-RU' ) {\n                      tooltip = `${tooltipDiff < 0 ? 'Превышение на' : 'Осталось'} ${currencyFilter(Math.abs(tooltipDiff))}`;\n                  } else if( this.Locale === 'en-US' ) {\n                      tooltip = `${tooltipDiff < 0 ? 'Excess by' : 'Left'} ${currencyFilter(Math.abs(tooltipDiff))}`;\n                  }\n\n                  return {\n                      ...c,\n                      progress,\n                      progressColor,\n                      spend,\n                      tooltip\n                  }\n              });\n\n            this.loading = false;\n        },\n        computed: {\n            ...mapGetters(['info', 'records', 'categories']), // get Info from Firebase\n        },\n\n    }\n</script>\n\n<style scoped>\n    @media (max-width: 900px) {\n        .page-title {\n            display: block;\n        }\n        .currency-header {\n            margin: 18px 0 8px;\n        }\n\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Planning.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Planning.vue?vue&type=template&id=4885cf0e&scoped=true&\"\nimport script from \"./Planning.vue?vue&type=script&lang=js&\"\nexport * from \"./Planning.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Planning.vue?vue&type=style&index=0&id=4885cf0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4885cf0e\",\n  null\n  \n)\n\nexport default component.exports","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}